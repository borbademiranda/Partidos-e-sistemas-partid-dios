knit_with_parameters('C:/Users/test/Desktop/TEste.Rmd', encoding = 'UTF-8')
library(manifestoR)
afd <- read.csv("41953_201709.csv")
setwd("C:/Users/test/Desktop/2018.2 - Partidos políticos e sistemas partidários/scripts")
afd <- read.csv("41953_201709.csv")
mp_codebook(version = "current", cache = TRUE, chapter = "categories")
View(afd)
mp_view_codebook(version = "current", columns = c("type", "code", "title"))
setwd("C:/Users/test/Desktop/2018.2 - Partidos políticos e sistemas partidários/tcc_joaquimmeira")
library(magrittr)
library(tidyverse)
library(haven) #v 1.10
library(emdist)
load("bls7_released_v01.rdata") #Dados do Brazilian Legislative Surveys
wvs <- read_stata("WV6_Stata_v_2016_01_01.dta") #Dados do World Values Survey, onda 6, Brasil
brasil <- read_spss("BRA6_UFPE_v20042018.sav") #Base com as perguntas especificas para o Brasil
bls %<>% filter(wave == 2013)
wvs %<>% filter(V2 == 76)
brasil[,setdiff(names(brasil),names(wvs))]
wvs %<>% cbind(brasil[,setdiff(names(brasil),names(wvs))])
rm(brasil)
#Tratar e reescalar dados
bls$ppswitc2 %<>% as.numeric
bls$onuseg %<>% as.numeric
bls$bndes %<>% as.numeric
bls$cotaafro %<>% as.numeric
bls$cotrenda %<>% as.numeric
bls$casament %<>% as.numeric
bls$aborto %<>% as.numeric
is.na(bls[,c("ppswitc2","onuseg","bndes","cotaafro","cotrenda","casament","aborto")]) <-
bls[,c("ppswitc2","onuseg","bndes","cotaafro","cotrenda","casament","aborto")] == 6
bls[,c("ppswitc2","onuseg","bndes","cotaafro","cotrenda","casament","aborto")] <-
(bls[,c("ppswitc2","onuseg","bndes","cotaafro","cotrenda","casament","aborto")] - 1)/4
wvs[,c("V228L", "V228M", "V228N", "V228O", "V228P", "V228Q", "V228R")] <-
(wvs[,c("V228L", "V228M", "V228N", "V228O", "V228P", "V228Q", "V228R")] - 1)/4
is.na(wvs$Y001) <- wvs$Y001 < 0
wvs$Y001 <- wvs$Y001/5
bls$pm12 <- bls$pm12/5
is.na(bls[,c("lrclass", "renda", "inicpriv", "govresp", "concorr", "getrich", "trabvida")]) <-
bls[,c("lrclass", "renda", "inicpriv", "govresp", "concorr", "getrich", "trabvida")] == 99
table(bls$lrclass)
bls[,c("lrclass", "renda", "inicpriv", "govresp", "concorr", "getrich", "trabvida")] <-
(bls[,c("lrclass", "renda", "inicpriv", "govresp", "concorr", "getrich", "trabvida")] - 1)/9
table(bls$lrclass)
is.na(wvs[,c("V95", "V96","V97","V98","V99","V100","V101")]) <-
wvs[,c("V95", "V96","V97","V98","V99","V100","V101")] < 0
wvs[,c("V95", "V96","V97","V98","V99","V100","V101")] <-
(wvs[,c("V95", "V96","V97","V98","V99","V100","V101")] - 1)/9
table(wvs$V95)
bls$enviro %<>% as.numeric
is.na(bls$enviro) <- bls$enviro == 3
bls$enviro <- bls$enviro - 1
is.na(wvs$V81) <- (wvs$V81 < 0 | wvs$V81 == 3)
wvs$V81 <- wvs$V81 - 1
?as.tibble
Analises <- as_tibble(list(nomes = c("Ideologia", "Renda", "Inic. Privada", "Resp. do Governo", "Concorrência", "Meritocracia", "Riqueza",
"Troca de partido", "CSNU", "BNDES", "Cotas (afro.)", "Cotas (renda)","Casamento Homo.","Aborto",
"Índice PM", "Meio-ambiente"), ord = c(1:16)))
Analises
Analises$geral <- c(emd.dis(bls$lrclass, wvs$V95), emd.dis(bls$renda, wvs$V96), emd.dis(bls$inicpriv, wvs$V97),
emd.dis(bls$govresp, wvs$V98), emd.dis(bls$concorr, wvs$V99), emd.dis(bls$getrich, wvs$V100),
emd.dis(bls$trabvida, wvs$V101),
emd.dis(bls$ppswitc2, wvs$V228L), emd.dis(bls$onuseg, wvs$V228M), emd.dis(bls$bndes, wvs$V228N),
emd.dis(bls$cotaafro, wvs$V228O), emd.dis(bls$cotrenda, wvs$V228P), emd.dis(bls$casament, wvs$V228Q),
emd.dis(bls$aborto, wvs$V228R), emd.dis(bls$pm12, wvs$Y001), emd.dis(bls$enviro, wvs$V81))
library(emdist)
Analises$geral <- c(emd.dis(bls$lrclass, wvs$V95), emd.dis(bls$renda, wvs$V96), emd.dis(bls$inicpriv, wvs$V97),
emd.dis(bls$govresp, wvs$V98), emd.dis(bls$concorr, wvs$V99), emd.dis(bls$getrich, wvs$V100),
emd.dis(bls$trabvida, wvs$V101),
emd.dis(bls$ppswitc2, wvs$V228L), emd.dis(bls$onuseg, wvs$V228M), emd.dis(bls$bndes, wvs$V228N),
emd.dis(bls$cotaafro, wvs$V228O), emd.dis(bls$cotrenda, wvs$V228P), emd.dis(bls$casament, wvs$V228Q),
emd.dis(bls$aborto, wvs$V228R), emd.dis(bls$pm12, wvs$Y001), emd.dis(bls$enviro, wvs$V81))
?emdist
?emd.dis
Analises$geral <- c(emd(bls$lrclass, wvs$V95), emd(bls$renda, wvs$V96), emd(bls$inicpriv, wvs$V97),
emd(bls$govresp, wvs$V98), emd(bls$concorr, wvs$V99), emd(bls$getrich, wvs$V100),
emd(bls$trabvida, wvs$V101),
emd(bls$ppswitc2, wvs$V228L), emd(bls$onuseg, wvs$V228M), emd(bls$bndes, wvs$V228N),
emd(bls$cotaafro, wvs$V228O), emd(bls$cotrenda, wvs$V228P), emd(bls$casament, wvs$V228Q),
emd(bls$aborto, wvs$V228R), emd(bls$pm12, wvs$Y001), emd(bls$enviro, wvs$V81))
library(haven) #v 1.10
library(emdist)
Analises$geral <- c(emd(bls$lrclass, wvs$V95), emd(bls$renda, wvs$V96), emd(bls$inicpriv, wvs$V97),
emd(bls$govresp, wvs$V98), emd(bls$concorr, wvs$V99), emd(bls$getrich, wvs$V100),
emd(bls$trabvida, wvs$V101),
emd(bls$ppswitc2, wvs$V228L), emd(bls$onuseg, wvs$V228M), emd(bls$bndes, wvs$V228N),
emd(bls$cotaafro, wvs$V228O), emd(bls$cotrenda, wvs$V228P), emd(bls$casament, wvs$V228Q),
emd(bls$aborto, wvs$V228R), emd(bls$pm12, wvs$Y001), emd(bls$enviro, wvs$V81))
Analises$geral <- c(emd.dis(bls$lrclass, wvs$V95), emd.dis(bls$renda, wvs$V96), emd.dis(bls$inicpriv, wvs$V97),
emd.dis(bls$govresp, wvs$V98), emd.dis(bls$concorr, wvs$V99), emd.dis(bls$getrich, wvs$V100),
emd.dis(bls$trabvida, wvs$V101),
emd.dis(bls$ppswitc2, wvs$V228L), emd.dis(bls$onuseg, wvs$V228M), emd.dis(bls$bndes, wvs$V228N),
emd.dis(bls$cotaafro, wvs$V228O), emd.dis(bls$cotrenda, wvs$V228P), emd.dis(bls$casament, wvs$V228Q),
emd.dis(bls$aborto, wvs$V228R), emd.dis(bls$pm12, wvs$Y001), emd.dis(bls$enviro, wvs$V81))
View(Analises)
wvspt <- wvs %>% filter(V228 == 76002)
blspt <- bls %>% filter(party_survey == "PT")
Analises$PT <- c(emd.dis(blspt$lrclass, wvspt$V95), emd.dis(blspt$renda, wvspt$V96), emd.dis(blspt$inicpriv, wvspt$V97),
emd.dis(blspt$govresp, wvspt$V98), emd.dis(blspt$concorr, wvspt$V99), emd.dis(blspt$getrich, wvspt$V100),
emd.dis(blspt$trabvida, wvspt$V101),
emd.dis(blspt$ppswitc2, wvspt$V228L), emd.dis(blspt$onuseg, wvspt$V228M), emd.dis(blspt$bndes, wvspt$V228N),
emd.dis(blspt$cotaafro, wvspt$V228O), emd.dis(blspt$cotrenda, wvspt$V228P), emd.dis(blspt$casament, wvspt$V228Q),
emd.dis(blspt$aborto, wvspt$V228R), emd.dis(blspt$pm12, wvspt$Y001), emd.dis(blspt$enviro, wvspt$V81))
emd.dis(bls$lrclass, wvs$V95)
Analises$geral <- c(emd2d(bls$lrclass, wvs$V95), emd2d(bls$renda, wvs$V96), emd2d(bls$inicpriv, wvs$V97),
emd2d(bls$govresp, wvs$V98), emd2d(bls$concorr, wvs$V99), emd2d(bls$getrich, wvs$V100),
emd2d(bls$trabvida, wvs$V101),
emd2d(bls$ppswitc2, wvs$V228L), emd2d(bls$onuseg, wvs$V228M), emd2d(bls$bndes, wvs$V228N),
emd2d(bls$cotaafro, wvs$V228O), emd2d(bls$cotrenda, wvs$V228P), emd2d(bls$casament, wvs$V228Q),
emd2d(bls$aborto, wvs$V228R), emd2d(bls$pm12, wvs$Y001), emd2d(bls$enviro, wvs$V81))
Analises$geral <- c(edm.dis(bls$lrclass, wvs$V95), edm.dis(bls$renda, wvs$V96), edm.dis(bls$inicpriv, wvs$V97),
edm.dis(bls$govresp, wvs$V98), edm.dis(bls$concorr, wvs$V99), edm.dis(bls$getrich, wvs$V100),
edm.dis(bls$trabvida, wvs$V101),
edm.dis(bls$ppswitc2, wvs$V228L), edm.dis(bls$onuseg, wvs$V228M), edm.dis(bls$bndes, wvs$V228N),
edm.dis(bls$cotaafro, wvs$V228O), edm.dis(bls$cotrenda, wvs$V228P), edm.dis(bls$casament, wvs$V228Q),
edm.dis(bls$aborto, wvs$V228R), edm.dis(bls$pm12, wvs$Y001), edm.dis(bls$enviro, wvs$V81))
library(magrittr)
library(tidyverse)
library(haven) #v 1.10
library(emdist)
Analises$geral <- c(edm.dis(bls$lrclass, wvs$V95), edm.dis(bls$renda, wvs$V96), edm.dis(bls$inicpriv, wvs$V97),
edm.dis(bls$govresp, wvs$V98), edm.dis(bls$concorr, wvs$V99), edm.dis(bls$getrich, wvs$V100),
edm.dis(bls$trabvida, wvs$V101),
edm.dis(bls$ppswitc2, wvs$V228L), edm.dis(bls$onuseg, wvs$V228M), edm.dis(bls$bndes, wvs$V228N),
edm.dis(bls$cotaafro, wvs$V228O), edm.dis(bls$cotrenda, wvs$V228P), edm.dis(bls$casament, wvs$V228Q),
edm.dis(bls$aborto, wvs$V228R), edm.dis(bls$pm12, wvs$Y001), edm.dis(bls$enviro, wvs$V81))
Analises$geral <- c(emd.dis(bls$lrclass, wvs$V95), emd.dis(bls$renda, wvs$V96), emd.dis(bls$inicpriv, wvs$V97),
emd.dis(bls$govresp, wvs$V98), emd.dis(bls$concorr, wvs$V99), emd.dis(bls$getrich, wvs$V100),
emd.dis(bls$trabvida, wvs$V101),
emd.dis(bls$ppswitc2, wvs$V228L), emd.dis(bls$onuseg, wvs$V228M), emd.dis(bls$bndes, wvs$V228N),
emd.dis(bls$cotaafro, wvs$V228O), emd.dis(bls$cotrenda, wvs$V228P), emd.dis(bls$casament, wvs$V228Q),
emd.dis(bls$aborto, wvs$V228R), emd.dis(bls$pm12, wvs$Y001), emd.dis(bls$enviro, wvs$V81))
install.packages("haven")
install.packages("haven")
emddis(bls$lrclass, wvs$V95)
emddis(bls$lrclass, wvs$V95)
emdist(bls$lrclass, wvs$V95)
emdist(bls$lrclass, wvs$V95)
emd.dist(bls$lrclass, wvs$V95)
emd.dist(bls$lrclass, wvs$V95)
emd(blspt, wvspt, dist = "euclidean")
emd2d(blspt, wvspt, dist = "euclidean")
emdw(blspt, wvspt, dist = "euclidean")
Analises <- as_tibble(list(nomes = c("Ideologia", "Renda", "Inic. Privada", "Resp. do Governo", "Concorrência", "Meritocracia", "Riqueza",
"Troca de partido", "CSNU", "BNDES", "Cotas (afro.)", "Cotas (renda)","Casamento Homo.","Aborto",
"Índice PM", "Meio-ambiente"), ord = c(1:16)))
Analises
Analises$geral <- c(emd.dis(bls$lrclass, wvs$V95), emd.dis(bls$renda, wvs$V96), emd.dis(bls$inicpriv, wvs$V97),
emd.dis(bls$govresp, wvs$V98), emd.dis(bls$concorr, wvs$V99), emd.dis(bls$getrich, wvs$V100),
emd.dis(bls$trabvida, wvs$V101),
emd.dis(bls$ppswitc2, wvs$V228L), emd.dis(bls$onuseg, wvs$V228M), emd.dis(bls$bndes, wvs$V228N),
emd.dis(bls$cotaafro, wvs$V228O), emd.dis(bls$cotrenda, wvs$V228P), emd.dis(bls$casament, wvs$V228Q),
emd.dis(bls$aborto, wvs$V228R), emd.dis(bls$pm12, wvs$Y001), emd.dis(bls$enviro, wvs$V81))
emd.dis <- function(var1, var2){
X <- as.matrix(var1[which(is.na(var1) == F)])
Y <- as.matrix(var2[which(is.na(var2) == F)])
weight.x <- rep(1/nrow(X),nrow(X))
weight.y <- rep(1/nrow(Y),nrow(Y))
emdw(X,weight.x,Y,weight.y,dist="manhattan")
}
Analises$geral <- c(emd.dis(bls$lrclass, wvs$V95), emd.dis(bls$renda, wvs$V96), emd.dis(bls$inicpriv, wvs$V97),
emd.dis(bls$govresp, wvs$V98), emd.dis(bls$concorr, wvs$V99), emd.dis(bls$getrich, wvs$V100),
emd.dis(bls$trabvida, wvs$V101),
emd.dis(bls$ppswitc2, wvs$V228L), emd.dis(bls$onuseg, wvs$V228M), emd.dis(bls$bndes, wvs$V228N),
emd.dis(bls$cotaafro, wvs$V228O), emd.dis(bls$cotrenda, wvs$V228P), emd.dis(bls$casament, wvs$V228Q),
emd.dis(bls$aborto, wvs$V228R), emd.dis(bls$pm12, wvs$Y001), emd.dis(bls$enviro, wvs$V81))
Analises
wvspt <- wvs %>% filter(V228 == 76002)
blspt <- bls %>% filter(party_survey == "PT")
Analises$PT <- c(emd.dis(blspt$lrclass, wvspt$V95), emd.dis(blspt$renda, wvspt$V96), emd.dis(blspt$inicpriv, wvspt$V97),
emd.dis(blspt$govresp, wvspt$V98), emd.dis(blspt$concorr, wvspt$V99), emd.dis(blspt$getrich, wvspt$V100),
emd.dis(blspt$trabvida, wvspt$V101),
emd.dis(blspt$ppswitc2, wvspt$V228L), emd.dis(blspt$onuseg, wvspt$V228M), emd.dis(blspt$bndes, wvspt$V228N),
emd.dis(blspt$cotaafro, wvspt$V228O), emd.dis(blspt$cotrenda, wvspt$V228P), emd.dis(blspt$casament, wvspt$V228Q),
emd.dis(blspt$aborto, wvspt$V228R), emd.dis(blspt$pm12, wvspt$Y001), emd.dis(blspt$enviro, wvspt$V81))
wvspsdb <- wvs %>% filter(V228 == 76003)
blspsdb <- bls %>% filter(party_survey == "PSDB")
Analises$PSDB <- c(emd.dis(blspsdb$lrclass, wvspsdb$V95), emd.dis(blspsdb$renda, wvspsdb$V96), emd.dis(blspsdb$inicpriv, wvspsdb$V97),
emd.dis(blspsdb$govresp, wvspsdb$V98), emd.dis(blspsdb$concorr, wvspsdb$V99), emd.dis(blspsdb$getrich, wvspsdb$V100),
emd.dis(blspsdb$trabvida, wvspsdb$V101),
emd.dis(blspsdb$ppswitc2, wvspsdb$V228L), emd.dis(blspsdb$onuseg, wvspsdb$V228M), emd.dis(blspsdb$bndes, wvspsdb$V228N),
emd.dis(blspsdb$cotaafro, wvspsdb$V228O), emd.dis(blspsdb$cotrenda, wvspsdb$V228P), emd.dis(blspsdb$casament, wvspsdb$V228Q),
emd.dis(blspsdb$aborto, wvspsdb$V228R), emd.dis(blspsdb$pm12, wvspsdb$Y001), emd.dis(blspsdb$enviro, wvspsdb$V81))
wvsclasse <- wvs %>% filter(V239 >= 8)
Analises$classe <- c(emd.dis(bls$lrclass, wvsclasse$V95), emd.dis(bls$renda, wvsclasse$V96), emd.dis(bls$inicpriv, wvsclasse$V97),
emd.dis(bls$govresp, wvsclasse$V98), emd.dis(bls$concorr, wvsclasse$V99), emd.dis(bls$getrich, wvsclasse$V100),
emd.dis(bls$trabvida, wvsclasse$V101),
emd.dis(bls$ppswitc2, wvsclasse$V228L), emd.dis(bls$onuseg, wvsclasse$V228M), emd.dis(bls$bndes, wvsclasse$V228N),
emd.dis(bls$cotaafro, wvsclasse$V228O), emd.dis(bls$cotrenda, wvsclasse$V228P), emd.dis(bls$casament, wvsclasse$V228Q),
emd.dis(bls$aborto, wvsclasse$V228R), emd.dis(bls$pm12, wvsclasse$Y001), emd.dis(bls$enviro, wvsclasse$V81))
wvseduc <- wvs %>% filter(V248 == 9)
Analises$educ <- c(emd.dis(bls$lrclass, wvseduc$V95), emd.dis(bls$renda, wvseduc$V96), emd.dis(bls$inicpriv, wvseduc$V97),
emd.dis(bls$govresp, wvseduc$V98), emd.dis(bls$concorr, wvseduc$V99), emd.dis(bls$getrich, wvseduc$V100),
emd.dis(bls$trabvida, wvseduc$V101),
emd.dis(bls$ppswitc2, wvseduc$V228L), emd.dis(bls$onuseg, wvseduc$V228M), emd.dis(bls$bndes, wvseduc$V228N),
emd.dis(bls$cotaafro, wvseduc$V228O), emd.dis(bls$cotrenda, wvseduc$V228P), emd.dis(bls$casament, wvseduc$V228Q),
emd.dis(bls$aborto, wvseduc$V228R), emd.dis(bls$pm12, wvseduc$Y001), emd.dis(bls$enviro, wvseduc$V81))
setwd("C:/Users/test/Desktop/2018.2 - Partidos políticos e sistemas partidários/scripts")
library(manifestoR)
setwd("C:/Users/test/Desktop/2018.2 - Partidos políticos e sistemas partidários/scripts")
afd <- read.csv("41953_201709.csv")
mp_codebook(version = "current", cache = TRUE, chapter = "categories")
mp_view_codebook(version = "current", columns = c("type", "code", "title"))
